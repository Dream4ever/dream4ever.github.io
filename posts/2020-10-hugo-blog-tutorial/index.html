<!DOCTYPE html>
<html lang="en-us" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="何伟" />
	
	
	
	<title>Hugo 博客配置教程 ｜ 岁月留痕</title>
	
    
    
    <meta name="description" content="创建博客所需 repo 假设你在 GitHub 上的用户名是 abcd，那么在 GitHub 上创建下面两个 repo：
 一个叫 blog，用于存放 Hugo 博客的原始文件，包括博客配置，文章的 md 文件等。 另一个叫 abcd.github.io，用于存放 Hugo 编译生成的网页文件，访问博客时看到的就是网页文件。  记得在创建第二个 repo 的时候，至少选上 README、.gitignore、LICENSE 三个文件中的一个，这样创建出来的 repo 就不是空的。
如果不这样做，将第二个 repo 添加为第一个 repo 的子模块的操作就会失败，处理起来会很麻烦。
" />
    

    

	
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" media="screen" href="https://www.hewei.in/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://www.hewei.in/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://www.hewei.in/css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">首页</a>
            </li>
            
            <li>
                <a href="/posts/">归档</a>
            </li>
            
            <li>
                <a href="/tags/">标签</a>
            </li>
            
            <li>
                <a href="/about/">我</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://www.hewei.in/">
                    <span>岁月留痕</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title"></p>
            <div class="my_socials">
                
                
                <a href="https://github.com/Dream4ever" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                <a href="https://www.hewei.in/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/2020-10-hugo-blog-tutorial/'>Hugo 博客配置教程</a></h2>
                        <span class="date">2020.10.17</span>
                    </div>
                    <div class="post_content markdown"><h2 id="创建博客所需-repo">创建博客所需 repo</h2>
<p>假设你在 GitHub 上的用户名是 <code>abcd</code>，那么在 GitHub 上创建下面两个 repo：</p>
<ul>
<li>一个叫 <code>blog</code>，用于存放 Hugo 博客的原始文件，包括博客配置，文章的 md 文件等。</li>
<li>另一个叫 <code>abcd.github.io</code>，用于存放 Hugo 编译生成的网页文件，访问博客时看到的就是网页文件。</li>
</ul>
<p>记得在创建第二个 repo 的时候，至少选上 README、.gitignore、LICENSE 三个文件中的一个，这样创建出来的 repo 就不是空的。</p>
<p>如果不这样做，将第二个 repo 添加为第一个 repo 的子模块的操作就会失败，处理起来会很麻烦。</p>
<h2 id="配置源文件-repo">配置源文件 repo</h2>
<p>依次执行以下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 将 repo clone 至本机 blog 文件夹中</span>
$ git clone https://github.com/abcd/blog.git
<span class="c1"># 用 blog 文件夹生成 Hugo 博客的初始内容</span>
$ hugo new site blog --force
<span class="c1"># 将博客主题添加为 blog 这个 repo 的子模块</span>
<span class="c1"># 这样两者互不影响</span>
$ <span class="nb">cd</span> blog
$ git submodule add https://github.com/varkai/hugo-theme-zozo themes/zozo
<span class="nb">echo</span> <span class="s1">&#39;theme = &#34;zozo&#34;&#39;</span> &gt;&gt; config.toml
</code></pre></div><h2 id="本地测试博客效果">本地测试博客效果</h2>
<p>在 <code>content\posts</code> 目录下新建几个后缀为 <code>.md</code> 的 Markdown 文件，随便写上一些内容。然后在命令行执行 <code>hugo server</code>，在浏览器中访问 <code>http://localhost:1313</code>，就能够看到博客效果了。</p>
<h2 id="配置最终网页-repo">配置最终网页 repo</h2>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 将 public 文件夹与 repo abcd.github.io 相关联</span>
$ git submodule add -b main https://github.com/abcd/abcd.github.io.git public
</code></pre></div><p>编辑 Hugo 的配置文件 <code>config.toml</code>，将 <code>baseUrl</code> 字段的值设置为 <code>baseUrl = &quot;https://abcd.github.io/&quot;</code></p>
<p>同时在主项目根目录的 <code>static</code> 文件夹中新建文件 <code>CNAME</code>，文件内容为 <code>abcd.github.io</code>。</p>
<p>这样一来，执行 <code>hugo -D</code> 所编译生成的最终网页 repo 中的所有页面及代码，相关的根链接就都被设置为 <code>https://abcd.github.io/</code>，这样可以保证 GitHub Pages 的功能会正常启用。</p>
<p>除此之外，还需要查看该 repo 的设置界面中，<code>GitHub Pages</code> 这一栏的 <code>Source</code>，所选的分支是不是 <code>main</code>，如果是 <code>Master</code>，还需要切换为 <code>main</code> 才行。</p>
<h2 id="使用自动发布博客的脚本">使用自动发布博客的脚本</h2>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="cp">#!/bin/sh
</span><span class="cp"></span>
<span class="c1"># If a command fails then the deploy stops</span>
<span class="nb">set</span> -e

<span class="nb">printf</span> <span class="s2">&#34;\033[0;32mDeploying updates to GitHub...\033[0m\n&#34;</span>

<span class="c1"># Build the project.</span>
<span class="c1"># 使用指定的主题编译博客</span>
hugo -t zozo <span class="c1"># if using a theme, replace with `hugo -t &lt;YOURTHEME&gt;`</span>

<span class="c1"># Go To Public folder</span>
<span class="nb">cd</span> public

<span class="c1"># Add changes to git.</span>
git add .

<span class="c1"># Commit changes.</span>
<span class="nv">msg</span><span class="o">=</span><span class="s2">&#34;rebuilding site </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&#34;</span>
<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
	<span class="nv">msg</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
<span class="k">fi</span>
git commit -m <span class="s2">&#34;</span><span class="nv">$msg</span><span class="s2">&#34;</span>

<span class="c1"># Push source and build repos.</span>
<span class="c1"># 2020-10-17：注意：现在 GitHub 的主分支已经改名为 main</span>
git push origin main
</code></pre></div><p>然后再执行下面的命令，来测试脚本是否可用</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 首次执行，需为脚本开启对应权限</span>
$ chmod +x deploy.sh
<span class="c1"># 调用脚本，发布博客</span>
$ ./deploy.sh <span class="s2">&#34;首次用脚本自动发布博客&#34;</span>
</code></pre></div><h2 id="使用自定义域名">使用自定义域名</h2>
<p>如果不想用 GitHub 的二级域名，而是想用自己的域名，那就需要额外再做一些配置。</p>
<p>假设你购买了域名 <code>blog.com</code>，那么就要在你的域名提供商那里，给该域名添加一条 <code>CNAME</code> 记录，将二级域名 <code>www</code> 的记录值，设置为前面给第二个仓库设置的名称：<code>abcd.github.io</code>。</p>
<p>然后修改 Hugo 配置文件 <code>config.toml</code> 中 <code>baseUrl</code> 字段的值为 <code>www.blog.com</code>，同时修改 <code>static/CNAME</code> 文件的内容为 <code>www.blog.com</code>。</p>
<p>这样一来，当用户访问 <code>www.blog.com</code> 的时候，其实显示的就是 <code>abcd.github.io</code> 中的内容。这样不需要额外找服务器来存放博客文件，省事多了。</p>
<p>对了，GitHub 默认会为 GitHub Pages 启用 HTTPS，你可能还需要为你的域名开启 HTTPS。</p>
<h2 id="参考资料">参考资料</h2>
<ul>
<li><a href="https://gohugo.io/getting-started/quick-start/">Quick Start | Hugo</a></li>
<li><a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">Host on GitHub | Hugo</a></li>
<li><a href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site">Managing a custom domain for your GitHub Pages site</a></li>
</ul></div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="https://www.hewei.in/tags/hugo/">Hugo</a>
                                    
                                    <a href="https://www.hewei.in/tags/blog-%E5%8D%9A%E5%AE%A2/">Blog 博客</a>
                                    
                                    <a href="https://www.hewei.in/tags/tutorial-%E6%95%99%E7%A8%8B/">Tutorial 教程</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                        
                        <div class="prevnext">
                            
                            <span class="is-inline is-pulled-right">
                                <a href="/posts/2020-10-mdn-javascript-docs-learning-note/" class="pagination-previous">后一篇：MDN JavaScript 教程 - 学习笔记</a>
                            </span>
                            
                            
                            <span class="is-inline">
                                <a href="/posts/2020-10-nodejs-package-management/" class="pagination-previous">前一篇：Node.js 包管理</a>
                            </span>
                            
                        </div>
                    </div>
                </div>
                
                
                
<div class="doc_comments">
    <div class="comments_block_title">发表评论</div>
    <div id="vcomments"></div>
</div>

<link rel="stylesheet" href="https://www.hewei.in/css/comments.css" />
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>

<script type="text/javascript">
    new Valine({
        el: '#vcomments',
        appId: '6kGh7JpRLb89n7mDsx4LmntN-gzGzoHsz',
        appKey: 'kWKa5LtKrMR1sMPfRl5Wzx4r',
        placeholder: '',
        visitor: 'true',
    })
</script>
                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://varkai.com">Designed by VarKai,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span></span>
    </div>
</footer>
    <script src="https://www.hewei.in/js/jquery-3.5.1.min.js"></script>
<link href="https://www.hewei.in/css/fancybox.min.css" rel="stylesheet">
<script src="https://www.hewei.in/js/fancybox.min.js"></script>
<script src="https://www.hewei.in/js/zozo.js"></script>




</body>

</html>