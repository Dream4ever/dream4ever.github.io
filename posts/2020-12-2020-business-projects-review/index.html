<!DOCTYPE html>
<html lang="en-us" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="何伟" />
	
	
	
	<title>2020 年终盘点 - 业务开发与个人成长 ｜ 岁月留痕</title>
	
    
    
    <meta name="description" content="2020 年一转眼又要结束了，这一年算是比较有收获，从年初到年末，大大小小地做了几个网站项目，积累了一点经验，也收获了一点成长。 为了让逝去的时间更有" />
    

    

	
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" media="screen" href="https://www.hewei.in/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://www.hewei.in/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://www.hewei.in/css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">首页</a>
            </li>
            
            <li>
                <a href="/posts/">归档</a>
            </li>
            
            <li>
                <a href="/tags/">标签</a>
            </li>
            
            <li>
                <a href="/about/">我</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://www.hewei.in/">
                    <span>岁月留痕</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title"></p>
            <div class="my_socials">
                
                
                <a href="https://github.com/Dream4ever" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                <a href="https://www.hewei.in/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/2020-12-2020-business-projects-review/'>2020 年终盘点 - 业务开发与个人成长</a></h2>
                        <span class="date">2020.11.30</span>
                    </div>
                    <div class="post_content markdown"><p>2020 年一转眼又要结束了，这一年算是比较有收获，从年初到年末，大大小小地做了几个网站项目，积累了一点经验，也收获了一点成长。</p>
<p>为了让逝去的时间更有价值，就在这里按时间顺序记录一下今年所做过的项目，以及自己在业务和技术两方面所收获的成长。</p>
<h2 id="项目一高校在线电子教材">项目一：高校在线电子教材</h2>
<p>年初疫情正猛烈的时候，看到了包括清华在内的一些名校，将自己所拥有的教材资源免费放到互联网上，供大家使用。那个时候还在 GitHub 上看到了一个新出现的热门项目，就是用来将清华放在互联网上的教材用爬虫下载到本地。</p>
<p>虽然自己所在的出版社也出版了相当数量的高校教材，但是自己在看到这类消息的时候，像“我们出版社能不能也做这样的事”这样的想法，只是在脑海里短暂出现了一阵。后来想了想，要是一放到网上，很可能瞬间就被各种各样的爬虫把图书资源给爬走了，还是不要放到网上更稳妥一些，所以之后便没再想这件事。</p>
<p>没想到过了没几天，领导就给自己分配了一个任务：为了响应抗疫行动的号召，需要把本出版社的部分高校教材放到网上，供用户免费使用；同时还要尽量保护图书资源，让用户不能轻易下载；万一用户下载到原始文件了，也不能是高清晰度、可以直接拿来印刷的文件。</p>
<p>为了完成这项艰巨任务，当时整个星期都是早8晚12的节奏，还好如期完成了任务，也算这番辛苦没有白费，下面就把这个项目中关键的几点需求讲一讲：</p>
<h3 id="需求-1pdf-文件的转换加密">需求 1：PDF 文件的转换、加密</h3>
<p>当时在网上查了不少资料，最终找到了一款可以用来处理图书 PDF 文件的软件，关键特性如下：</p>
<ol>
<li>能够将 PDF 格式的图书文件转换成 SWF 文件，每页为一个单独的 SWF 文件；</li>
<li>可以对 SWF 进行加密，用户即使下载了每一页的 SWF，也无法直接看到其中的内容；</li>
<li>在将 PDF 转换成 SWF 时，可以选择输出的 SWF 文件的清晰度，在保证用户能够看清图书内容的同时，又不会太过清晰以致于能被直接拿去印刷盗版图书。</li>
</ol>
<p>当然了，这还只是单本图书 PDF 文件的处理，当时需要短时间处理大量图书的 PDF 文件，于是又研究了一下 Windows 上的 PowerShell 脚本，最终实现了批量处理 PDF 的需求。</p>
<p>在编写这个脚本的过程中，着实花了些功夫去研究 PDF 处理软件该如何调用，如何规范输入的 PDF 文件和输出的 SWF 文件的路径及文件名格式，输出 SWF 文件的清晰度该如何选择，又如何向软件传入 PDF 和 SWF 的相关参数，以及中文字体转换错误等种种问题。不过功夫不负有心人，这些问题最终都一一解决了，完成了这个脚本之后，自己便从重复而繁琐的手工操作里解放出来了，只需要在电脑上运行着脚本就好，自己就可以放心去做别的事情了。</p>
<h3 id="需求-2解决-swf-兼容性问题">需求 2：解决 SWF 兼容性问题</h3>
<p>因为要在浏览器中运行 SWF，就需要浏览器中安装有 Flash 插件，虽然现代的主流浏览器基本上都自带 Flash 插件，但是因为安全性和各种其它原因，这些主流浏览器都打算在未来的某个版本中开始禁用 Flash。这样一来，SWF 格式的图书就无法正常浏览了，所以就需要解决可能发生的 SWF 的兼容性问题。</p>
<p>因为这是各大浏览器厂商的既定策略，不可能更改，所以得想想怎么“曲线救国”，来让用户能够正常阅读图书内容。再次上网搜索了一番之后，决定采用一个折中的方案：将图书的每一页内容以图片的形式呈现出来，这样的兼容性最好，毕竟图片浏览和文字浏览一样，是最常见的需求。</p>
<p>但是这样的话，又需要研究如何将 PDF 批量转换为图片，这次依然花了些功夫，因为在把 PDF 转换成图片时，同样需要选择合适的清晰度，才能在用户体验和安全性之间达到平衡，不过这个需求相对来说就简单多了，所以很快就完成了。</p>
<h3 id="需求-3关键资源加密及防下载">需求 3：关键资源加密及防下载</h3>
<p>虽然现在能够以 SWF 或者图片的形式将图书内容呈现出来了，但还需要进一步研究如何尽量阻止用户下载图书内容。从当时的研究结果来看，想要完全阻止用户下载是不可能的，因为从理论上来说，只要用户能够看到内容呈现在他的浏览器中，这个内容所对应的文件其实就已经在他的电脑硬盘上了，所以只能是在一个合理的范围内，尽量让用户难以下载。</p>
<p>对于 SWF 格式的图书来说，所用的软件本身就能够给 SWF 加密；而对于图片来说，经过判断之后，认为并没有加密的必要，所以也略过了。</p>
<p>而对于网页上的图片来说，在通常情况下，右键点击图片就可以将其保存到硬盘上。虽然可以编写 JS 阻止右键的相关行为，但 360 之类的国产浏览器还有看图相关的功能，还是会将页面中的图片识别出来，并提供对应的浏览或下载功能。经过一番研究之后，发现可以将图片以背景的方式显示出来，这样用户点击右键就不会有保存图片的选项了，360 之类的浏览器也不会显示对应的图片工具了。</p>
<p>与此同时，自己还手写了 lazy-load 功能，也就是在用户打开页面时，只加载当前页码的图书内容，及本页之前和之后的若干页；如果用户上下滚动页面，在滚动停止后，则将显示的内容替换为最新页码之前和之后若干页范围内的内容。这样一来，就能够保证始终只有少数几页显示出来，其余页面默认都不显示；另外还在代码中进行了设置，如果用户试图截长图，他会发现自己只能截取到浏览器窗口中肉眼可以看到的这部分内容，其余的内容都无法截取。</p>
<p>而且有了这样的 lazy-load 功能之后，不仅能够尽量保护图书资源，还大大减轻了服务器的流量压力；不然每次查看某本图书的时候，就把这本书几百页的内容都一次性加载出来，对服务器的带宽就太大了。</p>
<p>另外，自己还在服务器端进行了设置，对图书的 SWF 文件和图片文件的请求进行特征检测，如果判断为不是正常的阅读请求则直接阻断，这样进一步提升了图书文件的下载难度。</p>
<p>当然了，道高一尺魔高一丈，如果有人一心想要下载，他总是能找到方法的，不过还好经过半年的运行和监控，一直没发现有人试图恶意下载，也算是替自己省心了。</p>
<h3 id="小结">小结</h3>
<p>这个项目核心的部分是在最初的一个星期内完成的，之后就是在此基础之上的不断完善和改进，看到自己的工作能够帮助到用户，还是很有成就感的。</p>
<p>不过在之后反思的时候，意识到自己存在一个很明显的问题：一直认为自己只是纯粹的技术人员，没有从产品、没有从业务、没有从用户的角度去思考，这样其实是将自己局限在一个相对小的圈子里了，即使自己的技术可以一直提升，但是如果视野、想法不能够拓宽，那最终可能并不会有太大的成长。在不断提升能力深度的同时，拓展能力的宽度，从一维的“能力线段”拓展到二维的“能力平面”、三维的“能力立方体”，乃至多维的“能力立方体”，这样才会有更大的成长空间。</p>
<h2 id="项目二仿百度网盘">项目二：仿百度网盘</h2>
<p>在完成第一个项目后不久，又接到了这个任务，经过几番来来回回的沟通，最终确定需要开发的就是一个类似百度网盘的产品。虽然这个项目最后没有和需求方谈成，不过在先行开发的过程中，还是有一定的收获的。</p>
<h3 id="收获-1从抄好作业开始">收获 1：从抄好作业开始</h3>
<p>上学的时候，老师都希望大家能够自己写作业，但前提其实是能够把书上的知识都学懂了。而在工作中，常常需要解决自己之前没遇到过的问题，这个时候，最快速最有效的方案其实是先去“抄”一份别人写好的、质量比较高的作业。一边抄，一边去琢磨这份作业为什么大家觉得好，作业抄得多了，自己的能力也就逐渐提升了。</p>
<p>一直以来，自己在这方面其实是很欠缺的。在网站开发方面，经过这几年实际工作的锻炼和不断的自学，代码层面的需求现在基本都可以搞定了，目前最大的短板则是 UI 设计。而要想补足这个短板，其实最有效的方式就是抄作业，大量地抄优秀的作业，通过亲身实践，去感悟别人为什么要这样设计，好在哪里，以后可以怎样把相同的设计方法和技巧应用在其他地方。只有通过不断地实践，才能逐渐熟悉原本陌生的领域，不只是网页 UI 设计，各个领域其实都是如此。</p>
<p>这次的这个项目也是这样，最开始想自己设计 UI 和交互，结果发现设计出来的东西各种不靠谱，后来干脆直接照抄百度网盘，在抄的过程中，逐渐体会到了百度网盘的 UI 和交互为什么会这样设计，也意识到了自己之前所设计的产品不足之处在哪里。遗憾的是，没有将这些心得体会整理成文字保存下来，这也是自己之后在工作中需要改进的点。</p>
<h3 id="收获-2数据结构和算法的重要性">收获 2：数据结构和算法的重要性</h3>
<p>在实现这个功能的过程中，最关键的一点，就是用户上传了文件之后，如何显示目录树结构。包括显示用户当前访问的目录下所包含的文件夹、文件，以及在对话框等场景中，显示任意层数文件夹的需求。</p>
<p>而在浏览器中，用户如果上传一个包含了多层文件夹的目录，浏览器中获取到的只是每一个文件相对根目录的路径。在这种情况下，如果要显示目录树结构的话，就需要将一个个扁平的相对路径，经过一定的处理，才能转换成符合用户使用习惯的目录树结构。</p>
<p>在实现这个功能的过程中，当年上学时被数据结构和算法所折磨的那种感觉又回来了，真是深切地体会到了书到用时方恨少的含义，但是既然需求摆在这里，那就硬着头皮上吧，还好经过不断地思考和实践，最终也算是将这个需求实现了，在全部完成的那一刻，心里还是非常激动的，这可是攻克了一个不小的难关呐！</p>
<h3 id="收获-3oss-适合做网盘类功能的底层">收获 3：OSS 适合做网盘类功能的底层</h3>
<p>这个就属于业务层面的收获了，综合成本和开发效率两方面来看，云计算平台所提供的 OSS 服务非常适合做网盘类功能的底层存储。OSS 所提供的功能相对简单，也更纯粹，就是文件的上传、下载，用户也不需要维护一台服务器和各种软件，只需要按照相关文档，做好上传、下载功能对应的接口的调用即可，十分方便。</p>
<h2 id="项目三两套图书的配套网站">项目三：两套图书的配套网站</h2>
<p>在上面的百度网盘项目结束之后，又先后分别接到了为两套不同的图书，制作各自专属网站的工作。</p>
<h3 id="收获-1完整网站的-ui-设计">收获 1：完整网站的 UI 设计</h3>
<p>为第一套图书做的网站，其中所包含的页面，其实是少数几个页面，加上东拼西凑的各种细节设计组合而成的，看着就有种不搭的感觉。</p>
<p>第二套图书的网站就好多了，因为是把一套现成的网站模板拿过来进行的修改，所以整体就感觉比较和谐。</p>
<p>不过要想找一套让人满意的模板还是不容易的，即使只是找一个页面的模板都很难，别说找一套适用于整个网站的了，这还是需要平时多收集资源，也需要自己不断学习设计相关的知识，最终能够设计出比网上的模板还好的页面，那才算是功夫到家了。</p>
<h3 id="收获-2完整网站的功能开发">收获 2：完整网站的功能开发</h3>
<p>给这两套图书做的配套网站，终于用上了自己用 Node.js 开发的后端了。因为两个网站的功能很相似，所以 API 接口部分是通用的，只是在具体代码中，根据业务细节的不同有所区分。</p>
<p>前端页面部分的功能虽然比较简单，但是在实现各种需求的过程中也解决了不少问题，只不过这些积累的经验没有整理形成文字，之后应该花些时间好好整理一番，这样在以后开发同类功能的时候，就能少走很多弯路。</p>
</div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="https://www.hewei.in/tags/review-%E6%80%BB%E7%BB%93%E5%A4%8D%E7%9B%98/">Review 总结复盘</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                
                
<div class="doc_comments">
    <div class="comments_block_title">发表评论</div>
    <div id="vcomments"></div>
</div>

<link rel="stylesheet" href="https://www.hewei.in/css/comments.css" />
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>

<script type="text/javascript">
    new Valine({
        el: '#vcomments',
        appId: '6kGh7JpRLb89n7mDsx4LmntN-gzGzoHsz',
        appKey: 'kWKa5LtKrMR1sMPfRl5Wzx4r',
        placeholder: '',
        visitor: 'true',
    })
</script>
                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://varkai.com">Designed by VarKai,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span></span>
    </div>
</footer>
    <script src="https://www.hewei.in/js/jquery-3.5.1.min.js"></script>
<link href="https://www.hewei.in/css/fancybox.min.css" rel="stylesheet">
<script src="https://www.hewei.in/js/fancybox.min.js"></script>
<script src="https://www.hewei.in/js/zozo.js"></script>




</body>

</html>